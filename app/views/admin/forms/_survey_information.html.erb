<h2>General Information</h2>
<b>All fields required unless marked optional</b>
<br>
<br>
<b>Upload logo</b>
<br>
<br>
Logos should by 80 x 80 px square OR 320 x 80 px rectangle
<br>
<%= form_with(model: form, url: (form.persisted? ? admin_form_path(form) : admin_forms_path), local: true) do |f| %>
  <% if form.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(form.errors.count, "error") %> prohibited this form from being saved:</h2>

      <% form.errors.full_messages.each do |message| %>
        <div class="usa-alert usa-alert--error" >
          <div class="usa-alert__body">
            <h3 class="usa-alert__heading">Error</h3>
            <p class="usa-alert__text">
              <%= message %>
            </p>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="field">
    <p>
      <%= f.file_field :logo, class: "usa-button" %>
    </p>
  </div>

  <strong>Emails to notify when a response is received</strong>
  <br>
  <br>
  Separate multiple emails with a comma
  <br>
  <br>
  <div class="field">
    <%= f.text_field :noftification_emails, class: "usa-input" %>
  </div>
  <hr width=100%>
  <br>
  <h2>How Should the Survey be Published?</h2>
  <div class="usa-alert usa-alert--info">
    <div class="usa-alert__body">
      <p class="usa-alert__text">
        <strong>Options for Publishing Your Survey</strong>
        <br>
        A survey can be shared with users in a couple ways.
        <br>
        <ol>
          <li> We can <strong>host your form</strong> directly on the Touchpoints page.  Users will be able to access it from a publically available URL that
            you share on a website or email.  No coding or embedding is needed for this option.
          </li>
          <li> A survey can also be embedded directly on your website using one of three different methods:
            <ol>
              <li> <strong>Modal - </strong> Touchpoints will insert a default button on your website with the text that you indicate.  The button will launch
              a modal box displaying your survey</li>
              <li> <strong>Custom button modal - </strong> Works like the modal, except you provide your own custom styled button with the use of an
              html-element-id</li>
              <li> <strong>Inline -</strong> Touchpoints will embed your survey directly onto your website using an html-element-id</li>
            </ol>
          </li>
        </ol>
      </p>
    </div>
  </div>
  <br><br>
  <strong>Choose how will this form be displayed</strong>
  <br><br>
  <fieldset class="usa-fieldset">
    <% Form::DELIVERY_METHODS.each_with_index do |delivery_method, index| %>
      <div class="usa-checkbox">
        <%= f.radio_button :delivery_method, delivery_method, class: "usa-checkbox__input"  %>
        <%= f.label delivery_method, class: "usa-checkbox__label", for: "form_delivery_method_#{delivery_method}" %>
      </div>
    <% end %>
  </fieldset>

  <%= render 'components/whitelist_options', f: f %>
  <br><br>

  <hr width="100%">
  <br><br>
  <h2>Custopmer Experience (optional)</h2>

  <strong>Briefly describe the goal of this form</strong>
  <div class="grid-row grid-gap-md">
    <div class="grid-col-6">
      <div class="field">
        <%= f.text_area :notes, class: "usa-textarea" %>
      </div>
    </div>
  </div>
  <br>
  <strong>How many responses do you want to receive</strong>
  <div class="grid-col-6">
    <div class="field">
      <%= f.number_field :anticipated_delivery_count, class: "usa-input", placeholder: "100" %>
    </div>
  </div>

  <p>
    <%= f.submit (form.persisted? ? "Save Survey" : "Create Survey"), class: "usa-button" %>
    <%= link_to admin_forms_path do %>
      Cancel
    <% end %>
  </p>
<% end %>

<% if !form.persisted? %>
<script>
  // Disable create button by default
  $("input[type='submit'][value='Create Survey']").prop("disabled", true);

  // Enable create button if a form name is specified
  $("#form_name").on("keyup", function() {
    var contents = $(this).val();
    if(contents.length >= 3) {
      $("input[type='submit'][value='Create Survey']").prop("disabled", false);
    } else {
      $("input[type='submit'][value='Create Survey']").prop("disabled", true);
    }
  })
</script>
<% end %>
